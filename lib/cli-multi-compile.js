// Generated by CoffeeScript 2.0.0-beta9-dev
var CoffeeScript, compilers, createCodeEmitter, EmberScript, LiveScript, multiCompile;
EmberScript = require('./module');
CoffeeScript = require('coffee-script');
LiveScript = require('LiveScript');
EmberScript.compileCode = function (input, options) {
  var csAst, jsAst;
  csAst = EmberScript.parse(input, { raw: true });
  jsAst = EmberScript.compile(csAst);
  return EmberScript.js(jsAst);
};
compilers = {
  js: function (source) {
    return source;
  },
  coffee: function (source) {
    return CoffeeScript.compile(source, { bare: true });
  },
  live: function (source) {
    return LiveScript.compile(source, { bare: true });
  },
  ember: function (source) {
    return EmberScript.compileCode(source, {
      raw: true,
      literate: true
    });
  }
};
createCodeEmitter = function (options) {
  return function (code) {
    code = '' + code + '\n';
    if (options.output) {
      return fs.writeFile(options.output, code, function (err) {
        if (null != err)
          throw err;
      });
    } else {
      return process.stdout.write(code);
    }
  };
};
multiCompile = require('./multi-compiler');
module.exports = function (code, options) {
  var codeEmitter;
  codeEmitter = options.codeEmitter || createCodeEmitter(options);
  return multiCompile(code, compilers, codeEmitter);
};
